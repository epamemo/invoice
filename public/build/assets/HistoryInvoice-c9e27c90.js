import{r as l,R as g,g as w,j as a,a as e,b as p,d}from"./app-434eec2a.js";import{t as x,A as v}from"./AuthenticatedLayout2-aeee04ae.js";import{F as C}from"./format-rupiah.esm-667b4a74.js";import{c as y}from"./react-confirm-alert-a307378d.js";import{e as L}from"./empty-467e53d5.js";import{L as j}from"./index.es-8f85472e.js";import"./Sidebar-dd1fec0c.js";import"./boxicons-e0508a0b.js";function R(o){const[h,u]=l.useState(""),[n]=g(x);l.useEffect(()=>{const t=new MutationObserver(r=>{for(let s of r)if(s.attributeName==="data-theme"){const c=document.documentElement.getAttribute("data-theme");u(c)}});t.observe(document.documentElement,{attributes:!0});const i=document.documentElement.getAttribute("data-theme");return u(i),()=>{t.disconnect()}},[]);const[m,f]=l.useState({show:null,statusNotif:null}),N=t=>{y({customUI:({onClose:i})=>e("div",{className:"card w-96 bg-base-100 border-2",children:a("div",{className:"card-body items-center text-center",children:[e("h2",{className:"card-title",children:"Cookies!"}),e("p",{children:"We are using cookies for no reason."}),a("div",{className:"card-actions justify-end",children:[a(d,{className:"btn btn-error",href:route("delete.invoice"),onClick:i,method:"post",as:"button",data:{id:t},children:["Accept ",t]}),e("button",{className:"btn btn-ghost",onClick:i,children:"Deny"})]})]})})})};l.useEffect(()=>{o.invoice||w.get("history.invoice"),o.notification!==null&&(f({...o.notification}),o.notification.show&&setInterval(()=>f({show:!1}),2e3))},[]);const b=o.invoice.filter(t=>{var i,r,s,c;return((i=t.name)==null?void 0:i.toLowerCase().includes(n.toLowerCase()))||((r=t.status)==null?void 0:r.toLowerCase().includes(n.toLowerCase()))||((s=t.date)==null?void 0:s.toLowerCase().includes(n.toLowerCase()))||((c=t.total_price)==null?void 0:c.toLowerCase().includes(n.toLowerCase()))});return console.log(o.invoice),a(v,{user:o.auth.user,header:"History",children:[m.show&&e("div",{onClick:()=>f(!1),className:`alert alert-${m.statusNotif} shadow-lg w-auto z-10`,children:a("div",{className:"flex gap-2",children:[e("box-icon",{name:"party"}),a("span",{children:[" ",m.message]})]})}),e(p,{title:"History"}),e("div",{className:"pl-2 pr-4",children:e("div",{className:"overflow-x-auto",children:a("table",{className:"table w-full",children:[e("thead",{children:a("tr",{className:"text-center",children:[e("th",{children:"No"}),e("th",{children:"Nama Customer"}),e("th",{children:"Tanggal"}),e("th",{children:"Total Nilai"}),e("th",{children:"Status"}),e("th",{children:"Action"})]})}),e("tbody",{children:b.length===0?e("tr",{children:a("td",{colSpan:6,className:"prose text-center",children:[e(j,{animationData:L,className:"h-64"}),e("h2",{className:"mt-0",children:"Data tidak ada"})]})}):b.map((t,i)=>a("tr",{children:[e("th",{children:i+1}),e("td",{children:t.name}),e("td",{children:t.date}),e("td",{children:e(C,{value:t.total_price})}),e("td",{children:t.status}),e("td",{className:"flex gap-3",children:a("div",{className:"join rounded-xl",children:[e(d,{className:"btn btn-accent join-item",href:route("print.invoice"),method:"get",data:{id:t.id},as:"button",children:e("box-icon",{name:"printer",color:h==="light"?"#000000":"#ffffff"})}),e(d,{className:"btn btn-ghost join-item",href:route("edit.invoice"),method:"get",data:{id:t.id},as:"button",children:e("box-icon",{name:"edit",color:h==="light"?"#000000":"#ffffff"})}),e(d,{className:"btn btn-ghost join-item",href:"",onClick:()=>N(t.id),data:{id:t.id},as:"button",children:e("box-icon",{name:"trash",color:h==="light"?"#000000":"#ffffff"})})]})})]},i))})]})})})]})}export{R as default};
