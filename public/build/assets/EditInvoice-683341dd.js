import{r as s,q as P,j as t,a as e,g as M}from"./app-096681d8.js";import{I as y}from"./InputLabel-3277f235.js";import{T as S}from"./TextInput-f4fcf91f.js";import{A as _}from"./AuthenticatedLayout2-b46bf92c.js";import{L}from"./logo-simetri-8f9986ba.js";import w from"./Test-a6a71d90.js";import{F as I}from"./format-rupiah.esm-667b4a74.js";import"./boxicons-e0508a0b.js";import{a as z}from"./FormatInput-9cebfaa9.js";import"./Sidebar-fcc0b717.js";function Z(l){const[g,v]=s.useState({show:!1,statusNotif:""}),[n,d]=s.useState({invoice_id:l.invoice.id,nokw:"",date:"",price:0}),[m,C]=s.useState(l.cs);console.log("form",n),console.log("cs state",l.invoice);const[r,p]=s.useState(l.invoice_item);console.log("printed",r);const A=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let b=new Date(l.invoice.date);const{auth:D}=P().props;console.log(l);const N=a=>{if(a.target.name==="price"){const{name:i,value:c}=a.target,o=z(c,"Rp. ");d(f=>({...f,[i]:o}))}else{const{name:i,value:c}=a.target;d(o=>({...o,[i]:c}))}},K=()=>{if(console.log(n),n.nokw&&n.date&&n.price){const a=n.price.replace(/[^0-9]/g,""),i={invoice_id:l.invoice.id,nokw:n.nokw,date:n.date,price:parseInt(a)};p(c=>[...c,i]),d({nokw:"",date:"",price:0})}},R=()=>{const a={...r};if(m){const i={id:l.invoice.id,customer_id:m.id,data:a,total_price:u};M.post("/invoice/edit",i),d({nokw:"",date:"",price:0})}else v({show:!0,statusNotif:"warning"}),l.flash.message="Isi Nama Customer"};console.log(g);const T=a=>{p(i=>i.filter((c,o)=>o!==a))},O=a=>{const i=r[a];d(i),p(c=>c.filter((o,f)=>f!==a))},[j,x]=s.useState(null),[h,k]=s.useState(""),B=()=>{x(null)},E=a=>{x(a.name),C(a),console.log("data",a),console.log("name",a.name),console.log("search",h),k("")};let u=0;r.length!=0&&(u=r.reduce((a,i)=>a=a+parseInt(i.price),0),console.log(r.reduce((a,i)=>a=a+i.price,0)),console.log(u));const F=l.customer.filter(a=>{var i;return(i=a.name)==null?void 0:i.toLowerCase().includes(h.toLowerCase())}),J=a=>{k(a.target.value),console.log(h)};return t(_,{user:l.auth.user,header:l.title,children:[g.show&&e("div",{onClick:()=>v(!1),className:`alert alert-${g.statusNotif} shadow-lg w-auto`,children:t("div",{className:"flex gap-2",children:[e("box-icon",{name:"error"}),t("span",{children:[" ",l.flash.message]})]})}),t("div",{className:"",children:[t("div",{className:"text-gray-900",children:[t("div",{className:"grid grid-flow-col gap-4",children:[e("div",{className:"my-4 relative",children:e(w,{nameInpt:"nokw",type:"text",id:"nokw",label:"No. Kwitansi",placeholder:"Ketik No.Kwitansi",value:n.nokw,onchange:N})}),e("div",{className:"form-control my-4",children:e(w,{nameInpt:"date",id:"date",type:"date",label:"Tanggal",placeholder:"01/12/2000",value:n.date,onchange:N})}),e("div",{className:"form-control my-4",children:e(w,{nameInpt:"price",id:"price",type:"text",label:"Nilai Kwitansi",value:n.price,onchange:N,placeholder:"Rp. 000.000 ,-"})})]}),t("button",{className:"btn btn-primary",onClick:()=>R(),children:[e("box-icon",{name:"save",color:"#B4BFFE"}),"Submit"]}),t("button",{className:"btn btn-primary mx-3",onClick:K,children:[e("box-icon",{name:"plus"}),"Tambah Data"]}),e("div",{className:"form-control my-4",children:j!=null?t("div",{children:[e(y,{htmlFor:"nokw",children:"Customer"}),t("div",{className:"join w-full",children:[e(S,{id:"customer",type:"customer",className:"w-full px-4 py-2 join-item rounded-md border border-gray-300 focus:outline-none focus:border-blue-500",placeholder:"PT. Nama Perusahaan",value:m.name,readOnly:!0}),e("button",{className:"btn btn-warning join-item relative",onClick:()=>B(),children:"reset"})]})]}):t("div",{className:"",children:[e(y,{htmlFor:"customer",children:"Customer"}),e(S,{type:"text",id:"customer",name:"customer",className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:border-blue-500",placeholder:"customer",onChange:J})]})}),h&&e("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:F.map((a,i)=>e("div",{className:"px-4 py-2 cursor-pointer hover:bg-blue-100",onClick:()=>E(a),children:a.name},i))})]}),t("div",{className:"border-2 p-8 mt-4",children:[t("div",{className:"grid grid-flow-col gap-6 justify-between prose max-w-none mb-16",children:[t("div",{className:"w-2/4",children:[t("div",{className:"flex flex-wrap items-center h-fit",children:[e("img",{src:L,alt:"logo-simetri",className:"h-16 mr-4 mb-0 mt-0"}),e("h2",{className:"m-0",children:"PT. SINAR METRINDO PERKASA"})]}),t("div",{className:"grid grid-flow-col gap-4",children:[t("div",{children:[e("h4",{className:"",children:"Head Office"}),e("p",{children:"Aries Niaga Blok A1 No. 3A-3B, Jalan Taman Aries, Meruya Utara, Kembangan, Jakarta Barat, DKI 11620, Indonesia"})]}),t("div",{children:[e("h4",{children:"Workshop"}),e("p",{children:"Aries Niaga Blok A1 No. 3A-3B, Jalan Taman Aries, Meruya Utara, Kembangan, Jakarta Barat, DKI 11620, Indonesia"})]})]})]}),t("div",{className:"grid grid-flow-row content-between ",children:[e("h1",{className:"text-center",children:"INVOICE"})," ",t("div",{children:[e("h4",{children:"Kepada"}),e("p",{children:m.name})]})]})]}),t("div",{className:"prose max-w-none",children:[e("p",{className:"m-0",children:"Kwitansi-kwitansi / faktur-faktur sebagai berikut :"}),e("div",{className:"m-0",children:e("div",{className:"overflow-x-auto",children:t("table",{className:"table table-zebra border-2",children:[e("thead",{children:t("tr",{children:[e("th",{className:"bg-sim-red text-white text-center",children:"No."}),e("th",{className:"bg-sim-red text-white text-center",children:"No. Kwitansi"}),e("th",{className:"bg-sim-red text-white text-center",children:"Tanggal"}),e("th",{className:"bg-sim-blue text-white text-center",children:"Nominal"}),e("th",{className:"bg-sim-blue text-white text-center",children:"Opsi"})]})}),e("tbody",{children:r.length!=0?r.map((a,i)=>t("tr",{children:[e("th",{children:i+1}),t("td",{children:[a.nokw,","]}),e("td",{children:a.date}),e("td",{className:"text-right",children:e(I,{value:a.price})}),t("td",{className:"grid grid-flow-col items-center gap-2",children:[e("button",{className:"btn btn-accent",onClick:()=>O(i),children:"Edit"}),e("button",{className:"btn btn-ghost",onClick:()=>T(i),children:"Delete"})]})]},i)):e("tr",{className:"text-center",children:e("th",{colSpan:5,children:"(Data belum ada)"})})})]})})})]}),t("div",{className:"prose max-w-none grid grid-flow-col ",children:[e("div",{children:t("p",{className:"m-0",children:["Pembayaran setiap hari Jum'at, 2 minggu sekali"," ",e("br",{}),"Mulai jam 13.00 s/d 15.00"]})}),t("div",{className:"grid grid-rows-1 grid-flow-col",children:[e("h2",{className:"m-0",children:"Total"}),t("p",{className:"m-0",children:[": ",e(I,{value:u}),",-"]})]})]}),t("div",{className:"prose flex justify-between",children:[e("div",{children:t("div",{children:[e("p",{children:"Penerima Barang"}),e("p",{children:D.user.name})]})}),t("div",{children:[t("p",{children:["Jakarta, ",b.getDate()," ",A[b.getMonth()]," ",b.getFullYear()]}),e("div",{children:e("p",{children:m.name})})]})]})]})]})]})}export{Z as default};
