import{r as c,q as P,j as t,a as e,g as M}from"./app-096681d8.js";import{I as S}from"./InputLabel-3277f235.js";import{T as I}from"./TextInput-f4fcf91f.js";import{A as L}from"./AuthenticatedLayout2-b46bf92c.js";import{L as _}from"./logo-simetri-8f9986ba.js";import x from"./Test-a6a71d90.js";import{F as C}from"./format-rupiah.esm-667b4a74.js";import"./boxicons-e0508a0b.js";import{a as z}from"./FormatInput-9cebfaa9.js";import"./Sidebar-fcc0b717.js";function Z(i){const[p,h]=c.useState({show:!1,statusNotif:""}),[l,d]=c.useState({nokw:"",date:"",price:0}),[u,A]=c.useState(),[s,N]=c.useState([]),K=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let b=new Date;const{auth:D}=P().props,w=a=>{if(a.target.name==="price"){const{name:r,value:n}=a.target,o=z(n,"Rp. ");d(v=>({...v,[r]:o}))}else{const{name:r,value:n}=a.target;d(o=>({...o,[r]:n}))}},R=()=>{if(console.log(l),l.nokw&&l.date&&l.price){const a=l.price.replace(/[^0-9]/g,""),r={nokw:l.nokw,date:l.date,price:parseInt(a)};N(n=>[...n,r]),d({nokw:"",date:"",price:0})}else l.nokw==null?(h({show:!0,statusNotif:"warning"}),i.flash.message="Isi No. Kwitansi"):l.date==null&&(h({show:!0,statusNotif:"warning"}),i.flash.message="Isi No. Kwitansi")};console.log(u);const T=()=>{const a={...s};if(u&&m>0){const r={customer_id:u.id,data:a,total_price:m};M.post("/invoice",r),d({nokw:"",date:"",price:0})}else h({show:!0,statusNotif:"warning"}),i.flash.message="Isi Nama Customer"};console.log(p);const F=a=>{N(r=>r.filter((n,o)=>o!==a))},O=a=>{const r=s[a];d(r),N(n=>n.filter((o,v)=>v!==a))},[f,k]=c.useState(null),[g,y]=c.useState(""),j=()=>{k(null)},B=a=>{k(a.name),A(a),console.log("data",a),console.log("name",a.name),console.log("search",g),y("")};let m=0;s.length!=0&&(m=s.reduce((a,r)=>a=a+r.price,0),console.log(s.reduce((a,r)=>a=a+r.price,0)),console.log(m));const J=i.customer.filter(a=>{var r;return(r=a.name)==null?void 0:r.toLowerCase().includes(g.toLowerCase())}),E=a=>{y(a.target.value),console.log(g)};return t(L,{user:i.auth.user,header:i.title,children:[p.show&&e("div",{onClick:()=>h(!1),className:`alert alert-${p.statusNotif} shadow-lg w-auto`,children:t("div",{className:"flex gap-2",children:[e("box-icon",{name:"error"}),t("span",{children:[" ",i.flash.message]})]})}),t("div",{className:"",children:[t("div",{className:"text-gray-900",children:[t("div",{className:"grid grid-flow-col gap-4",children:[e("div",{className:"my-4 relative",children:e(x,{nameInpt:"nokw",type:"text",id:"nokw",label:"No. Kwitansi",placeholder:"Ketik No.Kwitansi",value:l.nokw,onchange:w})}),e("div",{className:"form-control my-4",children:e(x,{nameInpt:"date",id:"date",type:"date",label:"Tanggal",placeholder:"01/12/2000",value:l.date,onchange:w})}),e("div",{className:"form-control my-4",children:e(x,{nameInpt:"price",id:"price",type:"text",label:"Nilai Kwitansi",value:l.price,onchange:w,placeholder:"Rp. 000.000 ,-"})})]}),t("button",{className:"btn btn-primary ",onClick:()=>T(),children:[e("box-icon",{name:"save",color:"#B4BFFE",className:""}),"Submit"]}),t("button",{className:"btn btn-outline btn-primary mx-3",onClick:R,children:[e("box-icon",{name:"plus",color:"#570DF8"}),"Tambah Data"]}),e("div",{className:"form-control my-4 ",children:f!=null?t("div",{children:[e(S,{htmlFor:"nokw",children:"Customer"}),t("div",{className:"join w-full",children:[e(I,{id:"customer",type:"customer",className:"w-full px-4 py-2 join-item rounded-md border border-gray-300 focus:outline-none focus:border-blue-500",placeholder:"PT. Nama Perusahaan",value:u.name,readOnly:!0}),e("button",{className:"btn btn-warning join-item relative",onClick:()=>j(),children:e("box-icon",{name:"reset"})})]})]}):t("div",{className:"",children:[e(S,{htmlFor:"customer",children:"Customer"}),e(I,{type:"text",id:"customer",name:"customer",className:"w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:border-blue-500",placeholder:"customer",onChange:E})]})}),g&&e("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:J.map((a,r)=>e("div",{className:"px-4 py-2 cursor-pointer hover:bg-blue-100",onClick:()=>B(a),children:a.name},r))})]}),t("div",{className:"border-2 p-8 mt-4",children:[t("div",{className:"grid grid-flow-col gap-6 justify-between prose max-w-none mb-16",children:[t("div",{className:"w-2/4",children:[t("div",{className:"flex flex-wrap items-center h-fit",children:[e("img",{src:_,alt:"logo-simetri",className:"h-16 mr-4 mb-0 mt-0"}),e("h2",{className:"m-0",children:"PT. SINAR METRINDO PERKASA"})]}),t("div",{className:"grid grid-flow-col gap-4",children:[t("div",{children:[e("h4",{className:"",children:"Head Office"}),e("p",{children:"Aries Niaga Blok A1 No. 3A-3B, Jalan Taman Aries, Meruya Utara, Kembangan, Jakarta Barat, DKI 11620, Indonesia"})]}),t("div",{children:[e("h4",{children:"Workshop"}),e("p",{children:"Aries Niaga Blok A1 No. 3A-3B, Jalan Taman Aries, Meruya Utara, Kembangan, Jakarta Barat, DKI 11620, Indonesia"})]})]})]}),t("div",{className:"grid grid-flow-row content-between ",children:[e("h1",{className:"text-center",children:"INVOICE"})," ",t("div",{children:[e("h4",{children:"Kepada"}),e("p",{children:f})]})]})]}),t("div",{className:"prose max-w-none",children:[e("p",{className:"m-0",children:"Kwitansi-kwitansi / faktur-faktur sebagai berikut :"}),e("div",{className:"m-0",children:e("div",{className:"overflow-x-auto",children:t("table",{className:"table table-zebra border-2",children:[e("thead",{children:t("tr",{children:[e("th",{className:"bg-sim-red text-white text-center",children:"No."}),e("th",{className:"bg-sim-red text-white text-center",children:"No. Kwitansi"}),e("th",{className:"bg-sim-red text-white text-center",children:"Tanggal"}),e("th",{className:"bg-sim-blue text-white text-center",children:"Nominal"}),e("th",{className:"bg-sim-blue text-white text-center",children:"Opsi"})]})}),e("tbody",{children:s.length!=0?s.map((a,r)=>t("tr",{children:[e("th",{children:r+1}),t("td",{children:[a.nokw,","]}),e("td",{children:a.date}),e("td",{className:"text-right",children:e(C,{value:a.price})}),t("td",{className:"grid grid-flow-col items-center gap-2",children:[e("button",{className:"btn btn-accent",onClick:()=>O(r),children:"Edit"}),e("button",{className:"btn btn-ghost",onClick:()=>F(r),children:"Delete"})]})]},r)):e("tr",{className:"text-center",children:e("th",{colSpan:5,children:"(Data belum ada)"})})})]})})})]}),t("div",{className:"prose max-w-none grid grid-flow-col ",children:[e("div",{children:t("p",{className:"m-0",children:["Pembayaran setiap hari Jum'at, 2 minggu sekali"," ",e("br",{}),"Mulai jam 13.00 s/d 15.00"]})}),t("div",{className:"grid grid-rows-1 grid-flow-col",children:[e("h2",{className:"m-0",children:"Total"}),t("p",{className:"m-0",children:[": ",e(C,{value:m}),",-"]})]})]}),t("div",{className:"prose flex justify-between",children:[e("div",{children:t("div",{children:[e("p",{children:"Penerima Barang"}),e("p",{children:D.user.name})]})}),t("div",{children:[t("p",{children:["Jakarta, ",b.getDate()," ",K[b.getMonth()]," ",b.getFullYear()]}),e("div",{children:e("p",{children:f})})]})]})]})]})]})}export{Z as default};
